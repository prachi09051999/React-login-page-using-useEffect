{"ast":null,"code":"import _slicedToArray from\"/Users/prachitripathi/Documents/projects/React-login-page-using-useEffect/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useReducer,useContext,useRef}from'react';import Card from'../UI/Card/Card';import classes from'./Login.module.css';import Button from'../UI/Button/Button';import AuthContext from'../../store/auth-context';import Input from'../UI/Input/Input';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var emailCheck=function emailCheck(state,action){if(action.type==='USER_INPUT'){return{value:action.val,isValid:action.val.includes('@')};}if(action.type==='USER_BLUR'){return{value:state.value,isValid:state.value.includes('@')};}return{value:'',isValid:false};};var passwordCheck=function passwordCheck(state,action){if(action.type==='USER_INPUT'){return{value:action.val,isValid:action.val.trim().length>6};}if(action.type==='USER_BLUR'){return{value:state.value,isValid:state.value.trim().length>6};}return{value:\"\",isValid:false};};var Login=function Login(props){// const [enteredEmail, setEnteredEmail] = useState('');\n// const [emailIsValid, setEmailIsValid] = useState();\n// const [enteredPassword, setEnteredPassword] = useState('');\n// const [passwordIsValid, setPasswordIsValid] = useState();\nvar _useReducer=useReducer(emailCheck,{value:\"\",isValid:null}),_useReducer2=_slicedToArray(_useReducer,2),emailValid=_useReducer2[0],dispatchEmail=_useReducer2[1];var _useReducer3=useReducer(passwordCheck,{value:\"\",isValid:null}),_useReducer4=_slicedToArray(_useReducer3,2),passwordValid=_useReducer4[0],dispatchPassword=_useReducer4[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),formIsValid=_useState2[0],setFormIsValid=_useState2[1];var ctx=useContext(AuthContext);var emailRef=useRef();var passwordRef=useRef();useEffect(function(){console.log(\"first func ran\");return function(){console.log(\"first cleanup ran\");};},[]);useEffect(function(){console.log(\"second func ran\");var handleTimer=setTimeout(function(){setFormIsValid(emailValid.isValid&&passwordValid.isValid);},500);return function(){console.log(\"second cleanup ran\");clearTimeout(handleTimer);};},[emailValid.isValid,passwordValid.isValid]);var emailChangeHandler=function emailChangeHandler(event){// setEnteredEmail(event.target.value);\ndispatchEmail({type:\"USER_INPUT\",val:event.target.value});};var passwordChangeHandler=function passwordChangeHandler(event){// setEnteredPassword(event.target.value);\ndispatchPassword({type:\"USER_INPUT\",val:event.target.value});// setFormIsValid(emailValid.isValid && passwordValid.isValid);\n};var validateEmailHandler=function validateEmailHandler(){// setEmailIsValid(emailValid.isValid);\ndispatchEmail({type:\"USER_BLUR\"});};var validatePasswordHandler=function validatePasswordHandler(){// setPasswordIsValid(enteredPassword.trim().length > 6);\ndispatchPassword({type:\"USER_BLUR\"});};var submitHandler=function submitHandler(event){event.preventDefault();if(formIsValid)ctx.onLogin(emailValid.value,passwordValid.value);else if(!emailValid.isValid){emailRef.current.focus();}else{passwordRef.current.focus();}};return/*#__PURE__*/_jsx(Card,{className:classes.login,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(Input,{ref:emailRef,id:\"email\",type:\"email\",label:\"E-Mail\",isValid:emailValid.isValid,onChangeHandler:emailChangeHandler,onValidation:validateEmailHandler,value:emailValid.value}),/*#__PURE__*/_jsx(Input,{ref:passwordRef,id:\"password\",type:\"password\",label:\"Password\",isValid:passwordValid.isValid,onChangeHandler:passwordChangeHandler,onValidation:validatePasswordHandler,value:passwordValid.value}),/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:/*#__PURE__*/_jsx(Button,{type:\"submit\",className:classes.btn,children:\"Login\"})})]})});};export default Login;","map":{"version":3,"sources":["/Users/prachitripathi/Documents/projects/React-login-page-using-useEffect/src/components/Login/Login.js"],"names":["React","useState","useEffect","useReducer","useContext","useRef","Card","classes","Button","AuthContext","Input","emailCheck","state","action","type","value","val","isValid","includes","passwordCheck","trim","length","Login","props","emailValid","dispatchEmail","passwordValid","dispatchPassword","formIsValid","setFormIsValid","ctx","emailRef","passwordRef","console","log","handleTimer","setTimeout","clearTimeout","emailChangeHandler","event","target","passwordChangeHandler","validateEmailHandler","validatePasswordHandler","submitHandler","preventDefault","onLogin","current","focus","login","actions","btn"],"mappings":"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","sourcesContent":["import React, { useState , useEffect, useReducer, useContext, useRef } from 'react';\n\nimport Card from '../UI/Card/Card';\nimport classes from './Login.module.css';\nimport Button from '../UI/Button/Button';\nimport AuthContext from '../../store/auth-context';\nimport Input from '../UI/Input/Input';\n\nconst emailCheck = (state,action) => {\n  if(action.type === 'USER_INPUT'){\n    return {value: action.val, isValid: action.val.includes('@')};\n  }\n  if(action.type === 'USER_BLUR'){\n    return {value:state.value,isValid: state.value.includes('@') };\n  }\nreturn {value:'',isValid:false};\n}\n\nconst passwordCheck = (state,action) => {\n  if(action.type === 'USER_INPUT'){\n    return {value: action.val, isValid: action.val.trim().length > 6};\n  }\n  if(action.type === 'USER_BLUR'){\n    return {value: state.value, isValid: state.value.trim().length > 6};\n  }\n  return {value: \"\", isValid: false};\n}\n\nconst Login = (props) => {\n  // const [enteredEmail, setEnteredEmail] = useState('');\n  // const [emailIsValid, setEmailIsValid] = useState();\n  // const [enteredPassword, setEnteredPassword] = useState('');\n  // const [passwordIsValid, setPasswordIsValid] = useState();\n  const [emailValid, dispatchEmail] = useReducer(emailCheck,{value:\"\",isValid:null});\n  const [passwordValid, dispatchPassword] = useReducer(passwordCheck, {value:\"\",isValid:null});\n  const [formIsValid, setFormIsValid] = useState(false);\n\n  const ctx = useContext(AuthContext);\n  const emailRef = useRef();\n  const passwordRef = useRef();\n\n  useEffect(()=>{\n    console.log(\"first func ran\");\n    return (()=>{\n      console.log(\"first cleanup ran\");\n    });\n  },[]);\n\n  useEffect(() => {\n    console.log(\"second func ran\");\n    const handleTimer = setTimeout(()=>{\n      setFormIsValid(\n        emailValid.isValid && passwordValid.isValid\n      );\n    },500);\n    return () => {\n      console.log(\"second cleanup ran\");\n      clearTimeout(handleTimer);\n    };\n    \n  }, [emailValid.isValid,passwordValid.isValid])\n\n\n  const emailChangeHandler = (event) => {\n    // setEnteredEmail(event.target.value);\n    dispatchEmail({type:\"USER_INPUT\",val:event.target.value});\n  };\n\n  const passwordChangeHandler = (event) => {\n    // setEnteredPassword(event.target.value);\n    dispatchPassword({type: \"USER_INPUT\", val: event.target.value});\n    // setFormIsValid(emailValid.isValid && passwordValid.isValid);\n  };\n\n  const validateEmailHandler = () => {\n    // setEmailIsValid(emailValid.isValid);\n    dispatchEmail({type:\"USER_BLUR\"});\n  };\n\n  const validatePasswordHandler = () => {\n    // setPasswordIsValid(enteredPassword.trim().length > 6);\n    dispatchPassword({type: \"USER_BLUR\"});\n  };\n\n  const submitHandler = (event) => {\n    event.preventDefault();\n    if(formIsValid)\n    ctx.onLogin(emailValid.value, passwordValid.value);\n    else if(!emailValid.isValid){\n      emailRef.current.focus();\n    }\n    else{\n      passwordRef.current.focus();\n    }\n  };\n\n  return (\n    <Card className={classes.login}>\n      <form onSubmit={submitHandler}>\n        <Input ref={emailRef} id=\"email\" type=\"email\" label=\"E-Mail\" isValid={emailValid.isValid} onChangeHandler={emailChangeHandler} onValidation ={validateEmailHandler} value={emailValid.value}/>\n        <Input ref={passwordRef} id=\"password\" type=\"password\" label=\"Password\" isValid={passwordValid.isValid} onChangeHandler={passwordChangeHandler} onValidation ={validatePasswordHandler} value={passwordValid.value}/>\n        <div className={classes.actions}>\n          <Button type=\"submit\" className={classes.btn}>\n            Login\n          </Button>\n        </div>\n      </form>\n    </Card>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}